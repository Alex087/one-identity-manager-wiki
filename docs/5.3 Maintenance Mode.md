**5.3 Maintenance Mode**

4 марта 2025 г.

14:47

 

- Description  
  Receiving an alert that states "The One Identity Manager database is
  in maintenance mode" on the system tray of front-end tools such as
  Manager and Designer.

> <img src="../media/5.3 Maintenance Mode/media/image1.png"
> style="width:5in;height:0.83333in" />
>
> Click To See Full Image.  
>   
> What is "Maintenance Mode"?  How can this be enabled/disabled?  
>   
> A compile generates the following error:
>
> <img src="../media/5.3 Maintenance Mode/media/image2.png"
> style="width:5in;height:0.8125in" />
>
> Click To See Full Image.

- Cause  
  As the error message implies, the system has detected that some of the
  triggers in the One Identity Manager database have been disabled. To
  protect the system from data corruption, the system falls into
  "maintenance mode".  
    
  This protection is new in version 8.  
    
  One reason for this is that there are custom triggers that are
  disabled.

- Resolution  
  To determine the reason for the message "\[810365\] A system
  maintenance is running", you can use the following SQL statement:  
    
  select dbo.QBM_FGIMaintenanceRunning()  
    
  There are 3 possible reasons for this:  
    
  1. If it still returns "Triggers disabled" there MUST be disabled
  triggers.  
    
  Check for disabled triggers:  
    
  -- show disabled triggers  
  select  
  o.name as 'Table',  
  t.name as 'Disabled trigger'  
  from sys.objects o  
  join sys.triggers t on o.object_id = t.parent_id  
  where  
  o.type in( 'U'  )  
  and t.is_disabled = 1  
    
  An "exec QBM_PTriggerEnable" would solve this.  
    
  2. Another possible reason is "Constraints disabled". In which case
  the following SQL can be used to repair it:  
    
  exec QBM_PConstraintEnable  
    
    
    
  3. And the third possible reason would be the database is in "Single
  user" mode.

>  
>
> *From
> \<<https://support.oneidentity.com/kb/4345487/what-is-one-identity-manager-maintenance-mode>\>*

