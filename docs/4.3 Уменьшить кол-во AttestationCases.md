4.3 Уменьшить кол-во AttestationCases

19 октября 2022 г.

16:03

 

Deleting Attestation Cases

| **Configuration parameter** | **Effect** |
|----|----|
| Common\ProcessState\PropertyLog | When this configuration parameter is set, changes to individual values are logged and shown in the process view. |

Table 47: Configuration Parameter for Logging Data Changes

The table AttestationCase expands very quickly when attestation is
performed regularly. To limit the number of attestation cases in the One
Identity Manager, you can delete Obsolete, closed attestation cases from
the database. The attestation case properties are logged and then the
attestation cases are deleted. The same number of attestation cases
remain in the database as are specified in the attestation policy. For
more detailed information about logging data changes tags, see the One
Identity Manager Configuration Guide.

| <img src="../media/4.3 Уменьшить кол-во AttestationCases/media/image1.png"
style="width:0.16667in;height:0.16667in" /> | **NOTE:** Ensure that the logged request procedures are archived for audit reasons. For more detailed information about the archiving process, see the One Identity Manager Data Archiving Administration Guide. |
|----|----|

***Prerequisites***

- The configuration parameter "Common\ProcessState\PropertyLog" is set.

- The attestation policy is enabled.

***To delete attestation cases automatically***

1.  Set the option **Log changes when deleting** on at least three
    columns in the table AttestationCase.

    1.  Start the Designer**.**

    2.  Select the category **Database Schema \| Tables \|
        AttestationCase**.

    3.  Select **Show table definition** in the task view.  
        Opens the Schema Editor.

    4.  Select a column in the Schema Editor.

    5.  Select the **More** tab in the Schema Editor edit view.

    6.  Set the option **Set Log changes when deleting**.

    7.  Repeat steps d) to F) for all columns to be recorded on
        deletion. These must be at least three.

    8.  Click **Commit to database** in the toolbar and save the
        changes.  
        These changes become effective the moment the DBQueue
        Processor has processed the tasks.

2.  Set the option **Log changes when deleting** on at least three
    columns in the table AttestationHistory.

    1.  Start the Designer**.**

    2.  Select the category **Database Schema \| Tables \|
        AttestationHistory**.

    3.  Repeat steps 1c) to 1h) for the table AttestationHistory.

3.  Enter the number of obsolete cases in the attestation policies.

    1.  Select the category **Attestation \| Attestation policies** in
        the Manager.

    2.  Select the attestation policy in the result list whose
        attestation cases should be deleted.

    3.  Select **Change master data** in the task view.

    4.  Enter a value larger than 0 in **Obsolete tasks limit**.

    5.  Save the changes.

| <img src="../media/4.3 Уменьшить кол-во AttestationCases/media/image1.png"
style="width:0.16667in;height:0.16667in" /> | **TIP:** If you want to prevent attestation cases being deleted for certain attestation policies, enter the value 0 for the obsolete task limit for this attestation policy. |
|----|----|

Attestation cases are deleted once

- A new attestation is started for an attestation policy.  
  - OR -

- An attestation policy is disabled.

The One Identity Manager tests how many closed attestation cases exists
in the database for each attestation object of this attestation policy.
If the number is more than the number of obsolete attestation cases:

- The attestation case properties and their approval sequence are
  recorded  
  All columns are recorded, which are marked for logging on deletion.

- The attestation cases are deleted.  
  The same number of attestation cases remain in the database as are
  specified in the obsolete tasks limit.

| <img src="../media/4.3 Уменьшить кол-во AttestationCases/media/image1.png"
style="width:0.16667in;height:0.16667in" /> | **NOTE:** Closed attestation cases are are also deleted in the case of disabled attestation policies if the configuration parameter "Common\ProcessState\PropertyLog" is not set. In this case, the deleted attestation cases are not logged. |
|----|----|

**Related Topics**

- [General Master Data for Attestation
  Policies](https://support.oneidentity.com/technical-documents/doc860416)

**Notifications in Attestation**

 

*From
\<<https://support.oneidentity.com/technical-documents/identity-manager/8.0/attestation-administration-guide/29>\>*

-----

AttestationCase (UID_AttestationCase, Display name, PropertyInfo2,
ReasonHead ) - ставим галку Log changes when deleting

AttestationHistory (UID_AttestationCase, DecisionType, ReasonHead) -
ставим галку Log changes when deleting

----

<span class="mark">Важно!</span>

При **Obsolete tasks limit**. = 1 остаются 2 AttestatioCases (текущий и
один исторический)

При создании нового AttestationCase - самый старый удаляется и остается
снова 2

---

 

