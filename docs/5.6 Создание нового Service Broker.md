5.6 Создание нового Service Broker

12 апреля 2024 г.

9:49

 

Была ошибка: "Service Broker not enabled for this Database"

Надо его пересоздать в SSMS

В JobQueueInfo удалить все Jobs

 

1\. Stop all DBQueue processor components and ensure the Job Queue is
empty:

exec QBM_PWatchDogPrepare 1

go

exec QBM_PDBQueuePrepare 1

go

 

Закрыть все подключения к БД (Manager, Designer…, остановить службу Job
Service)

2\. Check whether additional sessions are active on the database:

select \*

from sys.sysprocesses p

WHERE dbid = DB_ID ()

and SPID \<\>@@SPID

If there are other active sessions running, they must be completed.

 

 

3\. Create a new Service Broker ID and enable message delivery:

alter database \<database name\> set NEW_BROKER

go

alter database \<database name\> set ENABLE_BROKER

go

 

 

4\. Initialization of DBQueue processor:

exec QBM_PDBQueuePrepare 0,1

go

exec QBM_PWatchDogPrepare

go

 

*From
\<<https://support.oneidentity.com/identity-manager/kb/4320879/identity-manager-upgrade-error-50000-cannot-enable-broker-because-of-other-users-are-active>\>*

 

 
